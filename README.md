# üöÄ PocketOption API

[![GitHub](https://img.shields.io/badge/GitHub-AdminhuDev-blue?style=flat-square&logo=github)](https://github.com/AdminhuDev)
[![Website](https://img.shields.io/badge/Website-Portfolio-green?style=flat-square&logo=google-chrome)](https://adminhudev.github.io)
[![Telegram](https://img.shields.io/badge/Telegram-@devAdminhu-blue?style=flat-square&logo=telegram)](https://t.me/Analista_Adminhu)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg?style=flat-square)](https://opensource.org/licenses/MIT)
[![Python 3.6+](https://img.shields.io/badge/python-3.6+-blue.svg?style=flat-square)](https://www.python.org/downloads/)
[![Version](https://img.shields.io/badge/version-1.0.0-orange?style=flat-square)](https://github.com/AdminhuDev/pocketoptionapi)

> Uma API Python robusta e moderna para integra√ß√£o com a PocketOption, oferecendo uma interface limpa e eficiente para automa√ß√£o de opera√ß√µes de trading.

![Preview da API](pocketoption.png)

## ‚ú® Destaques

- üîê **Autentica√ß√£o Segura**: Login via SSID com valida√ß√£o robusta e processamento autom√°tico
- üíπ **Trading Automatizado**: Opera√ß√µes de compra/venda program√°ticas com suporte completo
- üìä **Dados em Tempo Real**: WebSocket otimizado para cota√ß√µes e opera√ß√µes instant√¢neas
- üìà **An√°lise T√©cnica**: Acesso a dados hist√≥ricos de velas (candles) e indicadores
- üõ°Ô∏è **Estabilidade**: Reconex√£o autom√°tica, tratamento de erros e locks thread-safe
- üîÑ **Vers√°til**: Suporte completo a contas demo e real
- ‚ö° **Performance**: Implementa√ß√£o ass√≠ncrona com asyncio para m√°xima performance
- üìù **Logs Detalhados**: Sistema de logging avan√ßado com Loguru para debugging

## üõ†Ô∏è Instala√ß√£o

### Via pip (recomendado):
```bash
pip install git+https://github.com/AdminhuDev/pocketoptionapi.git
```

### Para desenvolvimento:
```bash
git clone https://github.com/AdminhuDev/pocketoptionapi.git
cd pocketoptionapi
pip install -e .
```

### Depend√™ncias do Sistema:
- Python 3.6 ou superior
- pip (gerenciador de pacotes Python)

### Verifica√ß√£o da Instala√ß√£o:
```bash
python -c "import pocketoptionapi; print('‚úÖ PocketOption API instalada com sucesso!')"
```

## üìñ Uso B√°sico

```python
import asyncio
from pocketoptionapi.stable_api import PocketOption
import logging

# Configurar logging (opcional)
logging.basicConfig(level=logging.INFO, format='%(asctime)s %(message)s')

# Configura√ß√£o da sess√£o - formato completo obrigat√≥rio
ssid = '42["auth",{"session":"sua_sessao_aqui","isDemo":1,"uid":seu_uid_aqui,"platform":2}]'
demo = True  # True para conta demo, False para conta real

async def main():
    # Inicializar API
    api = PocketOption(ssid, demo)

    # Conectar
    conectado = await api.connect()
    if conectado:
        print("‚úÖ Conectado com sucesso!")

        # Consultar saldo
        saldo = await api.get_balance()
        print(f"üí∞ Saldo: ${saldo:.2f}")

        # Realizar opera√ß√£o
        sucesso, order_id = await api.buy(
            amount=10,           # Valor em $
            active="EURUSD_otc", # Par de moedas (note o sufixo _otc)
            action="call",       # "call" (Alta) ou "put" (Baixa)
            expirations=60       # Expira√ß√£o em segundos
        )

        if sucesso:
            print(f"‚úÖ Opera√ß√£o realizada: ID {order_id}")

            # Verificar resultado ap√≥s alguns segundos
            await asyncio.sleep(5)
            profit, status = await api.check_win(order_id)
            print(f"üìä Resultado: {status} - Profit: ${profit:.2f}")

        # Desconectar
        await api.disconnect()
    else:
        print("‚ùå Falha na conex√£o")

# Executar
asyncio.run(main())
```

## üéØ Recursos Avan√ßados

### Obten√ß√£o de Dados Hist√≥ricos (Candles)
```python
import asyncio
from pocketoptionapi.stable_api import PocketOption

async def get_historical_data():
    api = PocketOption(ssid, demo)
    await api.connect()

    # Obter hist√≥rico de candles
    candles = await api.get_candles(
        active="EURUSD_otc",    # Ativo com sufixo _otc
        period=60,              # Per√≠odo em segundos (1min, 5min, etc.)
        count=100,              # Quantidade de candles
        start_time=None         # Timestamp inicial (None = mais recente)
    )

    if candles:
        print(f"üìä Obtidos {len(candles)} candles")
        for candle in candles[:5]:  # Mostrar primeiros 5
            print(f"‚è∞ {candle['time']} - O:{candle['open']} H:{candle['high']} L:{candle['low']} C:{candle['close']}")

    await api.disconnect()

asyncio.run(get_historical_data())
```

### Obten√ß√£o de Payout (Retorno Percentual)
```python
async def get_payout_info():
    api = PocketOption(ssid, demo)
    await api.connect()

    # Aguardar dados de payout serem carregados
    await asyncio.sleep(3)

    # Obter payout para um par espec√≠fico
    payout = await api.GetPayout("EURUSD_otc")
    if payout:
        print(f"üìà Payout EURUSD_otc: {payout}%")
    else:
        print("‚ö†Ô∏è Payout n√£o dispon√≠vel")

    await api.disconnect()

asyncio.run(get_payout_info())
```

### Monitoramento de Ordens em Tempo Real
```python
async def monitor_orders():
    api = PocketOption(ssid, demo)
    await api.connect()

    # Realizar v√°rias opera√ß√µes
    orders = []
    for i in range(3):
        success, order_id = await api.buy(10, "EURUSD_otc", "call", 60)
        if success:
            orders.append(order_id)
            print(f"‚úÖ Ordem {i+1} criada: {order_id}")

    # Monitorar resultados
    for order_id in orders:
        await asyncio.sleep(65)  # Aguardar expira√ß√£o + buffer
        profit, status = await api.check_win(order_id)
        print(f"üìä Ordem {order_id}: {status} - Profit: ${profit:.2f}")

    await api.disconnect()

asyncio.run(monitor_orders())
```

## üîß Configura√ß√£o

### Depend√™ncias Principais
```txt
websocket-client>=1.6.1
requests>=2.31.0
python-dateutil>=2.8.2
websockets>=12.0
tzlocal>=5.1
loguru>=0.7.0
pandas>=2.1.3
colorama>=0.4.6
```

### Configura√ß√µes de Logging
```python
import logging
from loguru import logger

# Configura√ß√£o b√°sica
logging.basicConfig(level=logging.INFO)

# Ou configura√ß√£o avan√ßada com Loguru
logger.add("logs/pocketoption_{time}.log", rotation="1 day", retention="7 days")
```

### Obtendo o SSID
Para obter o SSID necess√°rio para autentica√ß√£o:

#### M√©todo Manual:
1. Fa√ßa login na plataforma PocketOption pelo navegador
2. Abra as Ferramentas do Desenvolvedor (F12)
3. V√° para a aba "Network" (Rede)
4. Procure por conex√µes WebSocket (filtro: WS)
5. Encontre uma mensagem que come√ßa com `42["auth"`
6. Copie o SSID completo no formato:
   ```
   42["auth",{"session":"session_string_aqui","isDemo":1,"uid":123456,"platform":2}]
   ```

#### M√©todo Autom√°tico (Recomendado):
```python
# Usar o parser autom√°tico da API
from pocketoptionapi.ssid_parser import process_ssid_input

# Seu SSID bruto
ssid_bruto = '42["auth",{"session":"minha_session","isDemo":1,"uid":123,"platform":2}]'
demo = True

# Processar automaticamente
ssid_formatado, dados_parseados = process_ssid_input(ssid_bruto, force_demo=demo)
```

#### Formatos Suportados:
- ‚úÖ **Formato Completo** (recomendado): `42["auth",{...}]`
- ‚úÖ **JSON Puro**: `{"session":"...",...}`
- ‚úÖ **Session ID Puro**: `session_string_aqui`
- ‚ùå **Outros formatos**: N√£o suportados

## üìö Documenta√ß√£o da API

### Classes Principais

#### `PocketOption`
Classe principal para intera√ß√£o com a PocketOption.

**M√©todos Principais:**
- `__init__(ssid, demo)`: Inicializa a API
- `connect()`: Conecta ao WebSocket
- `disconnect()`: Desconecta graciosamente
- `buy(amount, active, action, expirations)`: Realiza uma opera√ß√£o
- `check_win(order_id)`: Verifica resultado de uma opera√ß√£o
- `get_balance()`: Obt√©m saldo atual
- `get_candles(active, period, count)`: Obt√©m dados hist√≥ricos
- `GetPayout(pair)`: Obt√©m payout de um ativo

**Par√¢metros:**
- `ssid`: String de autentica√ß√£o no formato `42["auth",{...}]`
- `demo`: Boolean (True para conta demo, False para real)

#### `PocketOptionAPI`
Classe de baixo n√≠vel para comunica√ß√£o WebSocket.

**Atributos Importantes:**
- `websocket`: Cliente WebSocket
- `time_sync`: Sincroniza√ß√£o de tempo
- `get_balances`: Gerenciamento de saldos
- `buyv3`: Canal de opera√ß√µes
- `getcandles`: Canal de dados hist√≥ricos

### Constantes Importantes

#### Ativos Dispon√≠veis
```python
from pocketoptionapi.constants import ACTIVES

# Exemplos de ativos
print(ACTIVES["EURUSD_otc"])    # 66
print(ACTIVES["BTCUSD_otc"])    # 484
print(ACTIVES["#AAPL_otc"])     # 170
```

#### Timeframes
```python
TIMEFRAMES = {
    "1m": 60,
    "5m": 300,
    "15m": 900,
    "1h": 3600,
    "4h": 14400,
    "1d": 86400
}
```

#### Regi√µes WebSocket
```python
from pocketoptionapi.constants import REGION

# Regi√µes dispon√≠veis
print(REGION.get_all_regions())
```

### Tratamento de Erros

A API utiliza tratamento robusto de erros:

- **Conex√£o**: Reconex√£o autom√°tica com fallback entre servidores
- **Autentica√ß√£o**: Valida√ß√£o de SSID e reautentica√ß√£o autom√°tica
- **Opera√ß√µes**: Retry autom√°tico para opera√ß√µes falhadas
- **Timeout**: Timeouts configur√°veis para todas as opera√ß√µes

### Logs e Debug

```python
import logging
from loguru import logger

# Configurar logs detalhados
logger.add("debug.log", level="DEBUG")

# Ou usar logging padr√£o
logging.basicConfig(
    level=logging.DEBUG,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    handlers=[
        logging.FileHandler("pocketoption.log"),
        logging.StreamHandler()
    ]
)
```

## ü§ù Contribuindo

Sua contribui√ß√£o √© muito bem-vinda! Siga estes passos:

1. üç¥ Fork este reposit√≥rio
2. üîÑ Crie uma branch para sua feature
   ```bash
   git checkout -b feature/MinhaFeature
   ```
3. üíª Fa√ßa suas altera√ß√µes seguindo as melhores pr√°ticas:
   - Mantenha compatibilidade com Python 3.6+
   - Adicione testes para novas funcionalidades
   - Atualize a documenta√ß√£o
   - Use commits convencionais
4. ‚úÖ Commit usando mensagens convencionais
   ```bash
   git commit -m "feat: Adiciona nova funcionalidade"
   ```
5. üì§ Push para sua branch
   ```bash
   git push origin feature/MinhaFeature
   ```
6. üîç Abra um Pull Request com descri√ß√£o detalhada

### Diretrizes para Contribui√ß√£o
- üêõ **Bugs**: Abra uma issue detalhada
- ‚ú® **Features**: Discuta primeiro em uma issue
- üìù **Documenta√ß√£o**: Melhorias sempre bem-vindas
- üß™ **Testes**: Adicione testes para suas altera√ß√µes

## üìú Licen√ßa

Este projeto est√° licenciado sob a MIT License - veja o arquivo [LICENSE](LICENSE) para detalhes.

## ‚ö†Ô∏è Aviso Legal

**IMPORTANTE**: Este projeto √© uma implementa√ß√£o n√£o oficial e n√£o possui v√≠nculo com a PocketOption ou suas afiliadas.

- üö´ **Uso comercial**: N√£o recomendado sem consulta jur√≠dica
- ‚ö†Ô∏è **Riscos**: Trading envolve riscos financeiros significativos
- üîû **Idade**: Apenas para maiores de 18 anos
- üí∞ **Perdas**: Voc√™ pode perder todo seu capital investido
- üìä **Resultados**: Passados n√£o garantem resultados futuros

**Use por sua conta e risco. N√£o nos responsabilizamos por perdas financeiras.**

## üìû Suporte

- üí¨ Telegram: [@devAdminhu](https://t.me/devAdminhu)
- üåê Website: [adminhudev.site](https://adminhudev.github.io)
- üêõ Issues: [GitHub Issues](https://github.com/AdminhuDev/pocketoptionapi/issues)

## üôè Agradecimentos

- PocketOption pela plataforma
- Comunidade open source
- Todos os contribuidores

---

<p align="center">
  Desenvolvido com ‚ù§Ô∏è por <a href="https://github.com/AdminhuDev">AdminhuDev</a>
</p> 
